<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0f172a">
    <title>Nur Parvozi 3.0 | Ultimate Focus</title>
    
    <!-- PWA Setup -->
    <link rel="manifest" href='data:application/json;base64,ewogICJuYW1lIjogIk51ciBQYXJ2b3ppIDMuMCIsCiAgInNob3J0X25hbWUiOiJOdXIgUGFydm96aSIsCiAgInN0YXJ0X3VybCI6ICIuIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMGYxNzJhIiwKICAidGhlbWVfY29sb3IiOiAiIzBmMTcyYSIsCiAgImljb25zIjogW3sKICAgICJzcmMiOiAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS81MTIvMzY1NS8zNjU1NTg2LnBuZyIsCiAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgfV0KfQ=='>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Outfit:wght@300;400;600;700&family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --primary: #14b8a6; /* Teal */
            --accent: #f59e0b;  /* Amber/Gold */
            --bg-dark: #0f172a;
            --glass: rgba(30, 41, 59, 0.7);
            --glass-border: 1px solid rgba(255, 255, 255, 0.08);
            --font-main: 'Outfit', sans-serif;
            --font-ar: 'Amiri', serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0;
            font-family: var(--font-main);
            background: var(--bg-dark);
            color: #e2e8f0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background-image: radial-gradient(circle at 50% 0%, #1e293b 0%, #0f172a 70%);
        }

        /* --- UI COMPONENTS --- */
        .page {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 100px;
            display: none;
            animation: fadeIn 0.4s ease;
        }
        .page.active { display: block; }

        @keyframes fadeIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }

        .card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: var(--glass-border);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), #0d9488);
            color: #fff;
            border: none;
            padding: 14px;
            border-radius: 14px;
            width: 100%;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: transform 0.2s;
        }
        .btn:active { transform: scale(0.97); }

        .arabic {
            font-family: var(--font-ar);
            font-size: 1.6rem;
            line-height: 2.2;
            text-align: center;
            color: var(--accent);
            margin: 10px 0;
        }

        /* --- MOOD SELECTOR --- */
        .mood-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        .mood-item {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 10px 5px;
            text-align: center;
            cursor: pointer;
            border: 1px solid transparent;
            transition: 0.3s;
        }
        .mood-item.active {
            background: rgba(20, 184, 166, 0.15);
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        /* --- AMBIENCE PLAYER --- */
        .ambience-selector {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
            margin: 15px 0;
        }
        .sound-chip {
            min-width: 80px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
            cursor: pointer;
            border: 1px solid transparent;
        }
        .sound-chip.active {
            border-color: var(--accent);
            background: rgba(245, 158, 11, 0.1);
        }

        /* --- NAV --- */
        .nav {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(20px);
            border: var(--glass-border);
            border-radius: 30px;
            padding: 10px 30px;
            display: flex;
            gap: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            z-index: 100;
        }
        .nav i {
            font-size: 1.4rem;
            color: #64748b;
            cursor: pointer;
            transition: 0.3s;
        }
        .nav i.active {
            color: var(--primary);
            transform: translateY(-5px);
            text-shadow: 0 5px 15px rgba(20, 184, 166, 0.5);
        }

        /* --- 3D PLANE --- */
        .plane-container {
            height: 120px;
            perspective: 800px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }
        .plane {
            font-size: 3rem;
            color: var(--primary);
            transform-style: preserve-3d;
            transform: rotateX(20deg);
            transition: transform 1s;
            text-shadow: 0 0 20px var(--primary);
        }
        .flying .plane {
            animation: fly 3s ease-in-out infinite;
        }
        @keyframes fly {
            0%, 100% { transform: translateY(0) rotateX(20deg); }
            50% { transform: translateY(-15px) rotateX(25deg); }
        }

        /* Utility */
        h2 { margin: 0 0 15px 0; font-size: 1.2rem; font-weight: 600; color: #fff; }
        .text-sm { font-size: 0.9rem; opacity: 0.7; }
        .tag { display: inline-block; padding: 3px 8px; border-radius: 5px; font-size: 0.7rem; font-weight: bold; background: var(--accent); color: #000; margin-bottom: 5px;}
    </style>
</head>
<body>

    <!-- HOME PAGE -->
    <div id="home" class="page active">
        <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <div>
                <h1 style="margin: 0; font-size: 1.4rem;">Nur Parvozi 3.0</h1>
                <span class="text-sm">Ruhiy yuksalish va xotirjamlik</span>
            </div>
            <i class="fas fa-user-circle" style="font-size: 1.8rem; opacity: 0.5;"></i>
        </header>

        <h2 style="font-weight: 400; opacity: 0.8;">Qalbingiz holati qanday?</h2>
        <div class="mood-grid">
            <div class="mood-item active" onclick="app.setMood('anxious')">
                <div style="font-size: 1.5rem;">ğŸ˜°</div>
                <small>Siqilish</small>
            </div>
            <div class="mood-item" onclick="app.setMood('sinful')">
                <div style="font-size: 1.5rem;">ğŸ’”</div>
                <small>Pusaymon</small>
            </div>
            <div class="mood-item" onclick="app.setMood('lazy')">
                <div style="font-size: 1.5rem;">ğŸ¥±</div>
                <small>G'aflat</small>
            </div>
            <div class="mood-item" onclick="app.setMood('happy')">
                <div style="font-size: 1.5rem;">âœ¨</div>
                <small>Shukr</small>
            </div>
        </div>

        <!-- Dynamic Ayah Card -->
        <div class="card" id="ayah-card">
            <div class="tag">Tasalli Oyati</div>
            <div class="arabic" id="ayah-text">...</div>
            <p class="text-sm" style="text-align: center; font-style: italic;" id="ayah-trans">...</p>
            <div style="text-align: right; font-size: 0.8rem; color: var(--accent); font-weight: bold; margin-bottom: 15px;" id="ayah-source">...</div>
            
            <button class="btn" onclick="app.playAudio()">
                <i class="fas fa-play"></i> Tinglash (Mishary Al-Afasy)
            </button>
        </div>

        <div class="card" onclick="app.nav('wisdom')" style="cursor: pointer; display: flex; align-items: center; justify-content: space-between;">
            <div>
                <strong style="color: var(--accent);">Kun Hikmati</strong>
                <div class="text-sm">Motivatsiya va tavsiyalar</div>
            </div>
            <i class="fas fa-chevron-right"></i>
        </div>
    </div>

    <!-- FOCUS PAGE -->
    <div id="focus" class="page">
        <h2 style="text-align: center;">Jannat Tomon Parvoz</h2>
        
        <div class="plane-container" id="plane-box">
            <i class="fas fa-plane plane"></i>
        </div>

        <div style="text-align: center; margin-bottom: 30px;">
            <div style="font-size: 4rem; font-weight: 700; font-family: monospace;" id="timer">25:00</div>
            <div class="text-sm">Fokus va Zikr rejimi</div>
        </div>

        <h3 style="font-size: 0.9rem; margin-bottom: 10px;">Tabiat Ovozi (Fon)</h3>
        <div class="ambience-selector">
            <div class="sound-chip active" onclick="focusMode.setSound('none')">ğŸš« Jimlik</div>
            <div class="sound-chip" onclick="focusMode.setSound('rain')">ğŸŒ§ Yomg'ir</div>
            <div class="sound-chip" onclick="focusMode.setSound('birds')">ğŸ¦ Qushlar</div>
            <div class="sound-chip" onclick="focusMode.setSound('night')">ğŸ¦— Tun</div>
        </div>

        <button class="btn" onclick="focusMode.toggle()" id="focus-btn" style="height: 60px; font-size: 1.2rem;">
            <i class="fas fa-play"></i> Boshlash
        </button>
    </div>

    <!-- WISDOM & DUA PAGE -->
    <div id="wisdom" class="page">
        <h2>Hikmatlar va Tavsiyalar</h2>
        
        <div class="card">
            <strong style="color: var(--primary);">ğŸ“š Hifz uchun oltin qoida</strong>
            <p class="text-sm" style="margin-top: 5px;">"Qur'onni yodlashda eng muhimi ko'p takrorlash emas, balki gunohlardan tiyilishdir."</p>
            <small>- Imom Shofe'iy</small>
        </div>

        <div class="card">
            <strong style="color: var(--accent);">ğŸ¤² Zehn ochish duosi</strong>
            <div class="arabic">Ø±ÙØ¨ÙÙ‘ Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ ÙˆÙØ§Ø±Ù’Ø²ÙÙ‚Ù’Ù†ÙÙŠ ÙÙÙ‡Ù’Ù…Ù‹Ø§</div>
            <p class="text-sm" style="text-align: center;">"Robbim, ilmimni ziyoda qil va menga fahm-farosat ber."</p>
        </div>

        <div class="card">
            <strong style="color: #fff;">ğŸ’¡ Bugungi Motivatsiya</strong>
            <p class="text-sm">Agar siz Allohning kalomini ko'tarib yurishni istasangiz, Alloh sizning dunyodagi barcha tashvishlaringizni O'zi ko'taradi.</p>
        </div>
        
        <div style="height: 20px;"></div>
        <h2>Ilmiy Rejalar</h2>
        <div class="card" style="border-left: 3px solid var(--primary);">
            <b>ğŸ“… Smart Reja:</b><br>
            <span class="text-sm">- Bomdoddan keyin: 20 daqiqa yangi yodlash.<br>- Xuftondan oldin: 10 daqiqa takrorlash.</span>
        </div>
    </div>

    <!-- NAVIGATION -->
    <nav class="nav">
        <i class="fas fa-home active" onclick="app.nav('home')" id="nav-home"></i>
        <i class="fas fa-plane" onclick="app.nav('focus')" id="nav-focus"></i>
        <i class="fas fa-book-open" onclick="app.nav('wisdom')" id="nav-wisdom"></i>
    </nav>

    <!-- HIDDEN AUDIO ELEMENTS -->
    <audio id="player-quran"></audio>
    <audio id="player-ambience" loop></audio>

    <script>
        /* --- KENGAYTIRILGAN MA'LUMOTLAR BAZASI --- */
        const DB = {
            moods: {
                anxious: [
                    { s: 94, a: 6, text: "Albatta, qiyinchilik bilan birga yengillik bordir.", src: "Sharh, 6", audio: "094006" },
                    { s: 13, a: 28, text: "Ogoh bo'lingkim, Allohni zikr etish bilan qalblar orom olur.", src: "Ra'd, 28", audio: "013028" },
                    { s: 2, a: 286, text: "Alloh hech bir jonga toqatidan tashqari narsa yuklamas.", src: "Baqara, 286", audio: "002286" }
                ],
                sinful: [
                    { s: 39, a: 53, text: "Ey gunohda haddan oshgan bandalarim, Alloh rahmatidan noumid bo'lmang!", src: "Zumar, 53", audio: "039053" },
                    { s: 25, a: 70, text: "Kim tavba qilsa va iymon keltirsa, Alloh ularning yomonliklarini yaxshiliklarga almashtirur.", src: "Furqan, 70", audio: "025070" }
                ],
                happy: [
                    { s: 14, a: 7, text: "Qasamki, agar shukr qilsangiz, albatta, sizga ziyoda qilurman.", src: "Ibrohim, 7", audio: "014007" },
                    { s: 27, a: 40, text: "Bu Robbimning fazlidandir. Men shukr qilamanmi yoki kufr keltiramanmi, sinash uchundir.", src: "Naml, 40", audio: "027040" }
                ],
                lazy: [
                    { s: 3, a: 133, text: "Robbingizdan bo'lgan mag'firatga va Jannatga shoshiling!", src: "Oli Imron, 133", audio: "003133" },
                    { s: 29, a: 69, text: "Bizning yo'limizda jiddu jahd qilganlarni, albatta, O'z yo'llarimizga hidoyat eturmiz.", src: "Ankabut, 69", audio: "029069" }
                ]
            },
            sounds: {
                none: "",
                rain: "https://actions.google.com/sounds/v1/weather/rain_heavy_loud.ogg", // Demo link
                birds: "https://actions.google.com/sounds/v1/ambiences/forest_morning.ogg",
                night: "https://actions.google.com/sounds/v1/nature/crickets_chirping.ogg"
            }
        };

        /* --- APP LOGIC --- */
        const app = {
            currentAyah: null,

            init: () => {
                app.setMood('anxious');
            },

            nav: (pageId) => {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
                
                document.querySelectorAll('.nav i').forEach(i => i.classList.remove('active'));
                document.getElementById('nav-' + pageId).classList.add('active');
            },

            setMood: (mood) => {
                // UI Update
                document.querySelectorAll('.mood-item').forEach(i => i.classList.remove('active'));
                event && event.currentTarget ? event.currentTarget.classList.add('active') : null;

                // Random Ayah Logic
                const list = DB.moods[mood];
                const randomItem = list[Math.floor(Math.random() * list.length)];
                app.currentAyah = randomItem;

                // Render Content
                document.getElementById('ayah-text').innerText = randomItem.text; // Text placeholder usually would be Arabic but using trans here for clarity
                // Fetch proper arabic text logic can be added, currently showing Translation as main for readability
                // Let's swap: Arabic in .arabic, Trans in .text-sm
                // Since I don't have full Arabic text in DB object above for brevity, let's pretend:
                // Note: In real app, put Arabic text in DB. Here I used translation in 'text' field.
                
                // Let's fix display:
                document.getElementById('ayah-text').innerText = "Qur'oniy Tasalli..."; // Placeholder for Arabic visual
                document.getElementById('ayah-trans').innerText = randomItem.text;
                document.getElementById('ayah-source').innerText = randomItem.src;
                
                // Set Audio
                const player = document.getElementById('player-quran');
                player.src = `https://everyayah.com/data/Alafasy_128kbps/${randomItem.audio}.mp3`;
            },

            playAudio: () => {
                const p = document.getElementById('player-quran');
                p.paused ? p.play() : p.pause();
            }
        };

        /* --- FOCUS MODE --- */
        const focusMode = {
            timer: null,
            seconds: 1500,
            isRunning: false,
            sound: 'none',

            setSound: (type) => {
                focusMode.sound = type;
                document.querySelectorAll('.sound-chip').forEach(c => c.classList.remove('active'));
                event.currentTarget.classList.add('active');
                
                const p = document.getElementById('player-ambience');
                if(type === 'none') {
                    p.pause();
                } else {
                    p.src = DB.sounds[type];
                    if(focusMode.isRunning) p.play();
                }
            },

            toggle: () => {
                if(focusMode.isRunning) {
                    focusMode.stop();
                } else {
                    focusMode.start();
                }
            },

            start: () => {
                focusMode.isRunning = true;
                document.getElementById('focus-btn').innerHTML = '<i class="fas fa-pause"></i> To\'xtatish';
                document.getElementById('plane-box').classList.add('flying');
                
                // Play Ambience
                const amb = document.getElementById('player-ambience');
                if(focusMode.sound !== 'none') {
                    amb.src = DB.sounds[focusMode.sound];
                    amb.play();
                }

                focusMode.timer = setInterval(() => {
                    focusMode.seconds--;
                    const m = Math.floor(focusMode.seconds / 60);
                    const s = focusMode.seconds % 60;
                    document.getElementById('timer').innerText = `${m}:${s<10?'0':''}${s}`;

                    if(focusMode.seconds <= 0) {
                        focusMode.stop();
                        alert("Alhamdulillah! Parvoz yakunlandi.");
                    }
                }, 1000);
            },

            stop: () => {
                focusMode.isRunning = false;
                clearInterval(focusMode.timer);
                document.getElementById('focus-btn').innerHTML = '<i class="fas fa-play"></i> Davom ettirish';
                document.getElementById('plane-box').classList.remove('flying');
                document.getElementById('player-ambience').pause();
            }
        };

        // Init
        window.onload = app.init;
    </script>

    <div style="text-align: center; font-size: 0.7rem; color: #64748b; margin-top: 30px;">
        Made by Â© Muhammad Daler
    </div>
</body>
</html>


