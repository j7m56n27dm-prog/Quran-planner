<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tadabbur UltraPremium</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root{
--c-bg:#0f1115;
--c-bg-grad-start:#14181f;
--c-bg-grad-end:#0a0b0e;
--c-text:#e8e8ea;
--c-muted:#8a8d96;
--c-accent:#10b981;
--c-gold:#d4b483;
--ease:cubic-bezier(0.4,0,0.2,1);
--font-ui:'Inter',sans-serif;
--font-ar:'Amiri',serif;
--space-xs:8px;
--space-s:16px;
--space-m:24px;
--space-l:40px;
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;width:100%;font-family:var(--font-ui);background:linear-gradient(135deg,var(--c-bg-grad-start),var(--c-bg-grad-end));color:var(--c-text);overflow:hidden;-webkit-font-smoothing:antialiased;}
#app{position:relative;width:100%;height:100%;display:flex;justify-content:center;align-items:center;}
.screen{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;opacity:0;pointer-events:none;transition:all 0.6s var(--ease);transform:scale(0.96) translateY(6px);filter:blur(4px);}
.screen.active{opacity:1;pointer-events:auto;transform:scale(1) translateY(0);filter:blur(0);}
.arabic{font-family:var(--font-ar);font-size:2rem;direction:rtl;margin-bottom:16px;opacity:0;animation:fadeUp 0.8s forwards;}
.translation{font-size:1rem;color:var(--c-muted);max-width:600px;margin:0 auto;opacity:0;animation:fadeUp 1s forwards;}
.reflection{font-size:1.1rem;color:var(--c-gold);font-style:italic;margin-top:24px;opacity:0;animation:fadeUp 1.2s forwards;}
.btn{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);color:var(--c-text);padding:16px 24px;border-radius:12px;margin:8px;cursor:pointer;transition:all 0.2s var(--ease);}
.btn:hover{background:rgba(255,255,255,0.06);transform:translateY(-2px) scale(1.02);}
.btn-group{display:flex;flex-direction:column;}
.timer{font-size:4rem;font-variant-numeric:tabular-nums;margin-bottom:32px;opacity:0;animation:fadeUp 0.8s forwards;}
.progress{position:absolute;bottom:0;left:0;height:4px;background:var(--c-gold);width:0%;opacity:0.3;transition:width 0.5s linear;}
.breath{width:220px;height:220px;border-radius:50%;border:1px solid rgba(255,255,255,0.05);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;z-index:-1;}
.breath::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:50%;background:radial-gradient(circle, rgba(212,180,131,0.03) 0%,transparent 70%);animation:breathe 8s ease-in-out infinite;}
@keyframes breathe{0%,100%{transform:scale(0.8);opacity:0.3}50%{transform:scale(1.2);opacity:0.6}}
@keyframes fadeUp{0%{opacity:0;transform:translateY(10px) scale(0.98)}100%{opacity:1;transform:translateY(0) scale(1)}}
.ambient-glow{position:fixed;top:50%;left:50%;width:120vw;height:120vw;background:radial-gradient(circle, rgba(20,30,45,0.4) 0%, rgba(15,17,21,0) 70%);transform:translate(-50%,-50%);pointer-events:none;z-index:0;opacity:0.6;animation:breathe-bg 12s ease-in-out infinite alternate;}
@keyframes breathe-bg{0%{transform:translate(-50%,-50%) scale(1);opacity:0.5}100%{transform:translate(-50%,-50%) scale(1.1);opacity:0.7}}
</style>
</head>
<body>
<div class="ambient-glow"></div>
<div id="app">
<!-- HEART CHECK -->
<section id="heart" class="screen active">
<h1 class="arabic">Bugun qalbing qanday?</h1>
<div class="btn-group">
<button class="btn" onclick="app.selectHeart('Xotirjam')">Xotirjam</button>
<button class="btn" onclick="app.selectHeart('Charchagan')">Charchagan</button>
<button class="btn" onclick="app.selectHeart('Parishon')">Parishon</button>
<button class="btn" onclick="app.selectHeart('Og‘ir')">Og‘ir</button>
</div>
</section>
<!-- NIYYAH -->
<section id="niyyah" class="screen">
<div class="arabic">بِسْمِ اللَّهِ</div>
<p class="translation">Alloh roziligi uchun Qur’on bilan mashg‘ul bo‘lishni niyat qildim.</p>
<button class="btn" style="opacity:0;" id="niyyah-btn" onclick="app.goFocus()">Boshlash</button>
</section>
<!-- FOCUS SELECTION -->
<section id="focus" class="screen">
<h1 class="arabic">Vaqtni belgilang</h1>
<div class="btn-group">
<button class="btn" onclick="app.startSession(5)">5 min</button>
<button class="btn" onclick="app.startSession(10)">10 min</button>
<button class="btn" onclick="app.startSession(15)">15 min</button>
<button class="btn" onclick="app.startSession(25)">25 min</button>
<button class="btn" onclick="app.startSession(30)">30 min</button>
<button class="btn" onclick="app.startSession(45)">45 min</button>
<button class="btn" onclick="app.startSession(60)">60 min</button>
<button class="btn" onclick="app.startSession(90)">90 min</button>
<button class="btn" onclick="app.startSession(120)">120 min</button>
</div>
</section>
<!-- ACTIVE SESSION -->
<section id="active" class="screen">
<div class="breath"></div>
<div class="timer" id="timer">00:00</div>
<div class="progress" id="progress"></div>
<button class="btn" onclick="app.endSession()">Yakunlash</button>
</section>
<!-- REFLECTION -->
<section id="reflection" class="screen">
<div id="reflection-content"></div>
<button class="btn" onclick="app.reset()">Tinchlik</button>
</section>
</div>

<script>
const DB={
verses:[
{ar:"أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ",uz:"Ogoh bo‘lingki, Allohni zikr etish bilan qalblar orom olur."},
{ar:"وَرَتِّلِ الْقُرآنَ تَرْتِيلًا",uz:"Qur’onni tartil bilan tilovat qiling."},
{ar:"رَبِّ زِدْنِي عِلْمًا",uz:"Robbim, ilmimni ziyoda et."},
{ar:"إِنَّ مَعَ الْعُسْرِ يُسْرًا",uz:"Har qiyinchilik bilan yengillik bordir."},
{ar:"فَاذْكُرُونِي أَذْكُرْكُمْ",uz:"Meni eslangiz, men ham sizni eslayman."}],
duas:[
{ar:"اللهم أحي قلبي بالقرآن",uz:"Allohim, qalbimni Qur’on bilan tiriltir."},
{ar:"رَبِّ اجْعَلْنِي مِنْ أَهْلِ الْقُرآنِ",uz:"Robbim, meni Qur’on ahlidan qil."},
{ar:"اللهم اجعل نفسي مطمئنة",uz:"Allohim, nafsimni sokin qil."}],
reflections:[
"Bugun oz bo‘lsa ham baraka bor edi.",
"Sukut qalbni yumshatdi.",
"Qur’on — ruhning shifosi.",
"Alloh niyatingizni qabul qilsin.",
"Sokinlik — buyuk ne'mat."]
};

class TadabburApp{
constructor(){
this.state={heart:null,duration:0,remaining:0,interval:null,isActive:false};
this.screens={
heart:document.getElementById('heart'),
niyyah:document.getElementById('niyyah'),
focus:document.getElementById('focus'),
active:document.getElementById('active'),
reflection:document.getElementById('reflection')
};
this.timer=document.getElementById('timer');
this.progress=document.getElementById('progress');
this.niyBtn=document.getElementById('niyyah-btn');
}
show(id){
Object.values(this.screens).forEach(s=>s.classList.remove('active'));
this.screens[id].classList.add('active');
}
selectHeart(h){
this.state.heart=h;
this.show('niyyah');
setTimeout(()=>{this.niyBtn.style.opacity=1;},2500);
}
goFocus(){this.show('focus');}
startSession(mins){
this.state.duration=mins*60;
this.state.remaining=this.state.duration;
this.state.isActive=true;
this.show('active');
const start=Date.now(),end=start+this.state.duration*1000;
this.updateTimer(this.state.remaining);
this.updateProgress(this.state.remaining);
this.state.interval=setInterval(()=>{
const now=Date.now();
const rem=Math.max(0,Math.ceil((end-now)/1000));
this.state.remaining=rem;
this.updateTimer(rem);
this.updateProgress(rem);
if(rem<=0)this.endSession();
},1000);
}
updateTimer(sec){
const m=Math.floor(sec/60).toString().padStart(2,'0'),s=(sec%60).toString().padStart(2,'0');
this.timer.innerText=`${m}:${s}`;
}
updateProgress(sec){
const pct=((this.state.duration-sec)/this.state.duration)*100;
this.progress.style.width=pct+'%';
}
endSession(){
clearInterval(this.state.interval);
this.state.isActive=false;
this.show('reflection');
this.renderReflection();
}
renderReflection(){
const useDua=Math.random()>0.6;
const content=useDua?DB.duas[Math.floor(Math.random()*DB.duas.length)]:DB.verses[Math.floor(Math.random()*DB.verses.length)];
const reflection=DB.reflections[Math.floor(Math.random()*DB.reflections.length)];
this.screens.reflection.innerHTML=`<div class="arabic">${content.ar}</div><div class="translation">${content.uz}</div><div class="reflection">${reflection}</div><button class="btn" onclick="app.reset()">Tinchlik</button>`;
}
reset(){
this.show('heart');
this.progress.style.width='0%';
this.timer.innerText='00:00';
this.state={heart:null,duration:0,remaining:0,interval:null,isActive:false};
}
}

const app=new TadabburApp();
</script>
</body>
</html>